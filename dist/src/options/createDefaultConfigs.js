"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const Path=require("path"),fsExtra=require("fs-extra"),pkgInstall=require("pkg-install"),{cW:defaultConfigWizard}=require("../wizards"),{errorLog:eLog,successLog:sLog,loadingLog:lLog,warningLog:wLog}=require("../logs"),{FRAMES:CONFIG_FRAMES}=require("../constants");let CONFIG_FRAME_INDEX=0;const createDefaultConfigs=argv=>__awaiter(void 0,void 0,void 0,(function*(){if(!argv.c)return;const{config:config,template:template,framework:framework,install:install}=yield defaultConfigWizard(argv),templateFolder="t"===template?"typescript":"javascript",frameworkFolder="rn"===framework?"react-native":"r"===framework?"react":"nextjs";if(!!(config&&template&&framework&&install)){let src=Path.resolve(__dirname,`../../../templates/${frameworkFolder}/${templateFolder}`),dest=process.cwd(),srcDependencies=Path.resolve(__dirname,`../../../dependencies/${frameworkFolder}/${templateFolder}/dependencies.js`);const{dependencies:dependencies,devDependencies:devDependencies}=require(srcDependencies);let loading;try{fsExtra.copySync(src,dest,{overwrite:!0}),sLog("Generated Config files successfully!"),loading=setInterval((()=>{const frame=CONFIG_FRAMES[CONFIG_FRAME_INDEX=++CONFIG_FRAME_INDEX%CONFIG_FRAMES.length];lLog(frame,"Installing Dependencies")}),80),yield pkgInstall.install(dependencies,{dev:!1,prefer:"yarn"}),yield pkgInstall.install(devDependencies,{dev:!0,prefer:"yarn"}),sLog("Dependencies installed successfully!"),wLog("Don't forget to delete the files if exists - '.prettierrc.js', '.eslintrc.js'")}catch(err){eLog(err,"Generating config files")}loading&&clearInterval(loading)}else;}));module.exports=createDefaultConfigs;