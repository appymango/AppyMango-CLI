"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?n(e.value):i(e.value).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const Path=require("path"),fsExtra=require("fs-extra"),pkgInstall=require("pkg-install"),{cW:defaultConfigWizard}=require("../wizards"),{errorLog:eLog,successLog:sLog,loadingLog:lLog,warningLog:wLog}=require("../logs"),{FRAMES:CONFIG_FRAMES}=require("../constants");let CONFIG_FRAME_INDEX=0;const createDefaultConfigs=e=>__awaiter(void 0,void 0,void 0,(function*(){if(!e.c)return;const{config:t,template:n,framework:r,install:i}=yield defaultConfigWizard(e),s="t"===n?"typescript":"javascript",a="rn"===r?"react-native":"r"===r?"react":"nextjs";if(!!(t&&n&&r&&i)){let e=Path.resolve(__dirname,`../../../templates/${a}/${s}`),t=process.cwd(),n=Path.resolve(__dirname,`../../../dependencies/${a}/${s}/dependencies.js`);const{dependencies:r,devDependencies:i}=require(n);let o;try{fsExtra.copySync(e,t,{overwrite:!0}),sLog("Generated Config files successfully!"),o=setInterval((()=>{const e=CONFIG_FRAMES[CONFIG_FRAME_INDEX=++CONFIG_FRAME_INDEX%CONFIG_FRAMES.length];lLog(e,"Installing Dependencies")}),80),yield pkgInstall.install(r,{dev:!1,prefer:"yarn"}),yield pkgInstall.install(i,{dev:!0,prefer:"yarn"}),sLog("Dependencies installed successfully!"),wLog("Don't forget to delete the files if exists - '.prettierrc.js', '.eslintrc.js'")}catch(e){eLog(e,"Generating config files")}o&&clearInterval(o)}else;}));module.exports=createDefaultConfigs;